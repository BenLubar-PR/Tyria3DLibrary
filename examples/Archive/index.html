<html>
<head>
    <title>New Archive API test file</title>
    <meta content="">
    <style></style>
</head>
<body>
    <label>
        <input id="filePicker" type="file" />    
    </label>
    <script src="lib/jquery-1.11.1.min.js"></script>
    <script src="lib/DataStream.js"></script>
    <script src="lib/T3D-1.1.0.js"></script>
    <script>
        var settings = {
            t3dtoolsWorker: 'lib/t3dworker.js',
            concurrentTasks: (typeof navigator != 'undefined') ? navigator.hardwareConcurrency : 1
        };
        var archive;
        $("#filePicker").change(function(evt){
            var file = evt.target.files[0];
            archive = new T3D.Archive(settings);
            archive.loadArchive(file, (a) => {
                if(a.done){
                    archive.persistantUpdate(false, () => {
                        console.log("done");
                    });
                } else
                    console.log("sad");
                //archive._persistantStore.getAllFilesConcurrent().then((e) => {console.log(e.length)});
                //archive._persistantStore.getCount().then((e) => console.log(e));
            });
        });
    </script>
</body>
</html>